<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
	<title>Pixelate</title>
<style>

table
	{
	border-collapse: collapse;
	}

td
	{
	border: 1px solid silver;
	padding: .5em 1em;
	}

</style>
</head>
<body>

<img style="width: 40%; height: auto; image-rendering: pixelated;" src="image2.png">
<!--
<img style="transform: scale(50);" src="image2.png">
image-rendering: pixelated;
crisp-edges
-->

<img style="width: 40%; height: auto; image-rendering: pixelated;" src="temp/plage.jpg">

<img id="apod" style="width: 40%; height: auto;" src="">

<script type="module">

//import { download } from "./apod.mjs";
//import { astronomyPictureOfTheDay } from "./nasa.mjs";
//import { loadImage, getPixels, pixelate } from "./image.mjs";
import { pixelate } from "./image.mjs";
import { arrayToTable } from "./html.mjs";

function background(color)
	{
	return ` style="background-color: rgb(${color[0]}, ${color[1]}, ${color[2]});"`;
	}

pixelate("image2.png", 3).then(pixels =>
	{
	document.body.insertAdjacentHTML("beforeend", arrayToTable(pixels, background));
	});

pixelate("temp/plage.jpg", 150).then(pixels =>
	{
	document.body.insertAdjacentHTML("beforeend", arrayToTable(pixels, background));
	});

/*
astronomyPictureOfTheDay().then(async url =>
	{
	let image = await loadImage(url);

	let img = document.querySelector("#apod");

	img.src = url;

	// Uncaught (in promise) DOMException: The operation is insecure.
	let pixels = getPixels(img);

	//pixelate(img, 100).then(pixels => { document.body.insertAdjacentHTML("beforeend", arrayToTable(pixels, background)) });
	});
*/

</script>

</body>
</html>